pipeline {

 agent any
 
 stages {
  
  stage ("Git checkout") {
   steps {   
    git 'https://github.com/manu1rock/newocean.git'  
    }
  }
  
  stage ("Build") {
   steps {   
    dir('newocean') {
     script {
      bat 'mvn package'
      }  
    }    
    }
  }
  
  stage ("Test") {
   steps { 
    dir('newocean') {
     script {
      bat 'mvn test'
      }  
     }   
    }
  } 
 }
 
   post {
   success {
    echo "Sucessful: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]'"
   }
   
   failure {
    echo "Failure: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]'"
   }
   
   changed {
    echo "Status changed: [From: $currentBuild.previousBuild.result, To:$currentBuild.result"
   }
   
   always {
    junit allowEmptyResults: true, testResults: '**/test-results/*.xml'
   }
   
  }

}
